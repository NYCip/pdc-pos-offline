<?xml version="1.0" encoding="UTF-8"?>
<templates id="template" xml:space="preserve">

    <!-- Offline Login Popup - Odoo 19 Dialog Pattern -->
    <t t-name="PDCPOSOffline.OfflineLoginPopup">
        <Dialog title="dialogTitle" size="'md'">
            <div class="pdc-offline-login-popup">
                <div class="popup-header mb-3">
                    <div class="offline-indicator badge bg-warning">
                        <i class="fa fa-wifi-slash me-1"/> Offline Mode
                    </div>
                </div>

                <div class="popup-body">
                    <div class="alert alert-info mb-3">
                        <i class="fa fa-info-circle me-2"/>
                        No internet connection. Enter your PIN to continue offline.
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Username</label>
                        <input type="text"
                               class="form-control"
                               t-model="state.username"
                               t-att-readonly="props.username ? 'readonly' : undefined"
                               placeholder="Enter username"/>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">PIN Code</label>
                        <input type="password"
                               class="form-control pin-input text-center fs-3"
                               t-model="state.pin"
                               maxlength="4"
                               inputmode="numeric"
                               pattern="[0-9]*"
                               placeholder="****"
                               t-on-keyup="onPinKeyup"
                               autofocus="autofocus"/>
                        <div class="form-text">Enter your 4-digit offline PIN</div>
                    </div>

                    <t t-if="state.error">
                        <div class="alert alert-danger">
                            <i class="fa fa-exclamation-triangle me-2"/>
                            <t t-esc="state.error"/>
                        </div>
                    </t>

                    <t t-if="state.isLoading">
                        <div class="text-center py-3">
                            <i class="fa fa-spinner fa-spin fa-2x"/>
                            <p class="mt-2 text-muted">Authenticating...</p>
                        </div>
                    </t>
                </div>

                <div class="popup-footer d-flex justify-content-end gap-2 mt-3">
                    <button class="btn btn-secondary" t-on-click="cancel">
                        <i class="fa fa-times me-1"/>
                        <t t-esc="props.cancelText or 'Cancel'"/>
                    </button>
                    <button class="btn btn-primary"
                            t-on-click="authenticate"
                            t-att-disabled="!canAuthenticate or state.isLoading">
                        <i class="fa fa-sign-in me-1"/>
                        <t t-esc="props.confirmText or 'Login Offline'"/>
                    </button>
                </div>
            </div>
            <t t-set-slot="footer"/>
        </Dialog>
    </t>

</templates>
